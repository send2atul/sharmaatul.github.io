<!doctype html>
<html>

<head>
	<title>D3 tutorial</title>
	<script src="https://d3js.org/d3.v4.min.js"></script>
	<script src="https://d3js.org/d3-scale.v2.min.js"></script>
	
	


</head>

<body> 

	<script>
		
		var margin = {left:100 , right:100 , top:10 , bottom:10};
		
		var width = 600 - margin.left - margin.right
		var height = 400 - margin.top - margin.bottom
		
		var v = d3.scaleLinear()
				 .domain([0,828])
				 .range([height, 0]);
				 
		d3.json("Abuildings.json", function(data){
		console.log(data);
			data.forEach(function(d)
		{d.height = +d.height;});
		
		var xband = d3.scaleBand()
				 .domain(data.map(function(d){return d.name;}))
				 .range([0,400])
				 .paddingInner(0.4)
				 .paddingOuter(0.4);
				 
				 console.log(xband("Burj Khalifa"));
		
		console.log(v(100));
		console.log(v(800));
		
		
		
		var svg = d3.select("body")
					.append("svg")
					.attr("width",600)
					.attr("height",600)
					.append("g")
					.attr("transform","translate("+ margin.left +", " + margin.top +") ");
					
		
		var xAxiscall = d3.axisBottom(xband);
		svg.append("g")
			.attr("class", "x-axis")
			.attr("transform","translate(0,380)")
			.call(xAxiscall)
			.selectAll("text")
			.attr("y",10)
			.attr("x",-5)
			.attr("text-anchor","end")
			.attr("transform","rotate(-40)")
			
		svg.append("text")
			.attr("class", "x axis-label")
			.attr("x", width/2)
			.attr("y", height + 140)
			.attr("text-anchor", "middle")
			.text("The worlds tallest buildings");
					
		var yAxiscall = d3.axisLeft(v);
		svg.append("g")
			.attr("class", "y-axis")
			.call(yAxiscall);
		
		var rect = svg.selectAll("rect")
						.data(data)
				.enter()
				.append("rect")
				.attr("width", xband.bandwidth)
				.attr("y", function(d){return v(d.height)})
				.attr("height",function(d){return height - v(d.height)})
				.attr("x",function(d,i) {return xband(d.name);})
				.attr("fill","red") });
		
		
	
	</script>


</body>

