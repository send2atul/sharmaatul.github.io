<!doctype html>
<html>

<head>
	<title>Election Donoations 2012</title>
	<script src="https://d3js.org/d3.v4.min.js"></script>
	<script src="https://d3js.org/d3-scale.v2.min.js"></script>
	
	


</head>

<body> 

	<script>
		
		var margin = {left:100 , right:100 , top:10 , bottom:10};
		
		var width = 600 - margin.left - margin.right
		var height = 400 - margin.top - margin.bottom
		
		
				 
		d3.csv("CandidateDonorDetail.csv", function(data){
		//console.log(data);
		
		
		var v = d3.scaleLinear()
				.range([height,0]);
				 
		
		var xband = d3.scaleBand()
				 .range([0,400])
				 .paddingInner(0.3)
				 .paddingOuter(0.3);
				 
		var colorscale = d3.scaleOrdinal(d3.schemeCategory10);		 
		
		console.log(v(100));
		console.log(v(800));
		
		
		
		var svg = d3.select("body")
					.append("svg")
					.attr("width",800)
					.attr("height",800)
					.append("g")
					.attr("transform","translate("+ margin.left +", " + margin.top +") ");
					
		
		
			
			
		// adding legends
	
	
	//
		
		var rect = svg.selectAll("rect")
						.data(data)
				.enter()
				.append("rect")
				.attr("width", xband.bandwidth)
				.attr("y", function(d){return v(d.sum)})
				.attr("height",function(d){return height - v(d.sum)})
				.attr("x",function(d,i) {return xband(d.cand_nm);})
				.attr("fill",function(d){return colorscale(d.cand_nm)})
				
				
				svg.append("a")
          .attr("xlink:href", "https://send2atul.github.io/sharmaatul.github.io/gapMinder.html")
		  .append("rect")
		  .attr("x",400)
		  .attr("y",10)
		  .attr("height", 100)
    .attr("width", 200)
    .style("fill", "lightgreen")
	
	svg.append("text")
    .attr("x", 500)
    .attr("y", 40)
    .style("fill", "black")
    .style("font-size", "20px")
    .attr("dy", ".35em")
    .attr("text-anchor", "middle")
    .style("pointer-events", "none")
    .text("Click for Summary");
			
// interval 
			function update(data) 
{
	 v.domain([0,d3.max(data, function(d){return d.sum})]);
	xband.domain(data.map(function(d){return d.cand_nm;}));
	
	
	var xAxiscall = d3.axisBottom(xband);
		svg.append("g")
			.attr("class", "x-axis")
			.attr("transform","translate(0,380)")
			.call(xAxiscall)
			.selectAll("text")
			.attr("y",10)
			.attr("x",-5)
			.attr("text-anchor","end")
			.attr("transform","rotate(-40)")
			
		svg.append("text")
			.attr("class", "x axis-label")
			.attr("x", width/2)
			.attr("y", height + 140)
			.attr("text-anchor", "middle")
			.text("Donation Amount for Each Candidate");
					
		var yAxiscall = d3.axisLeft(v);
		svg.append("g")
			.attr("class", "y-axis")
			.tickFormat(function(d) { return "$" +d;})
			.call(yAxiscall);	
	
}
			
			
	d3.interval(function() { 
		update(data)
		 },1000);
		  });
		

	
	</script>


</body>

